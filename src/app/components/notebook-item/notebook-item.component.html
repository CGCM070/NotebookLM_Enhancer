<div class="group relative py-0.5" cdkDrag [cdkDragData]="notebook">
  <!-- Minimal Drag Placeholder -->
  <div *cdkDragPlaceholder class="my-1 h-8 w-full rounded bg-[#3C4043] border border-[#5F6368] opacity-50"></div>

  <div class="flex items-center justify-between gap-2 rounded px-2 py-1.5 transition-colors hover:bg-white/5">
    <div class="flex min-w-0 flex-1 items-center gap-2">
      <!-- Drag Handle (Minimal) -->
      <div
        class="flex cursor-move items-center justify-center text-[#5F6368] opacity-0 transition-opacity group-hover:opacity-100"
        cdkDragHandle aria-label="Drag to move">
        <svg viewBox="0 0 24 24" class="h-4 w-4 fill-current">
          <path
            d="M11 18c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zm-2-8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z" />
        </svg>
      </div>

      <button type="button" class="flex-1 min-w-0 text-left" (click)="open.emit(notebook)">
        <div class="flex items-center gap-2">
          <!-- Simple Doc Icon -->
          <svg viewBox="0 0 24 24" class="h-4 w-4 shrink-0 fill-current text-[#8AB4F8]">
            <path
              d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z" />
          </svg>
          <div class="truncate text-sm font-normal text-[#E3E3E3] group-hover:text-white">
            {{ notebook.title }}
          </div>
        </div>
      </button>
    </div>

    <!-- Actions (Folder Select - Minimal Fallback) -->
    <div class="shrink-0 opacity-0 transition-opacity group-hover:opacity-100">
      <div class="relative group/select">
        <select
          class="appearance-none cursor-pointer rounded border border-[#5F6368] bg-transparent py-0.5 pl-1.5 pr-4 text-[10px] text-[#9AA0A6] hover:border-[#E3E3E3] hover:text-[#E3E3E3] focus:border-[#8AB4F8] focus:outline-none"
          [value]="selectedFolderId ?? ''" (change)="onSelectChanged($any($event.target).value)"
          aria-label="Move to folder" (click)="$event.stopPropagation()">
          <option value="" class="bg-[#202124]">Inbox</option>
          @for (f of folders; track f.id) {
          <option [value]="f.id" class="bg-[#202124]">{{ f.name }}</option>
          }
        </select>
        <div
          class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-1 text-[#9AA0A6] group-hover/select:text-[#E3E3E3]">
          <svg class="h-3 w-3 fill-current" viewBox="0 0 20 20">
            <path
              d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" />
          </svg>
        </div>
      </div>
    </div>
  </div>
</div>